name: ekara_demo_gb2
qualifier: light

ekara:
  parent:
    repository: ekara-platform/distribution
    ref: master
  components:
    nirekin-hook:
      repository: nirekin/hook
      
vars:
  ekara:
    path: /var/lib/ekara
    
tasks:
  hook1:
    component: nirekin-hook 
    playbook: book1.yaml
  hook2:
    component: nirekin-hook 
    playbook: book2.yaml
  hook3:
    component: nirekin-hook 
    playbook: book3.yaml
  hook4:
    component: nirekin-hook 
    playbook: book4.yaml

nodes:
  nodeset1:
    provider:
      name: ek-aws
      params:
        instances:
          instance_type: "t3.small"
 
    instances: 1
    hooks:
      create:
        before:
          - task: hook3  
          - task: hook4  
            prefix: hook4Prefix

hooks:
  create:
    before:
      - task: hook1  
      - task: hook2  
        prefix: hook2Prefix
  install:
    before:
      - task: hook5
      - task: hook6
        prefix: hook6Prefix

stacks:
  visualizer:
    component: ek-swarm-visualizer
